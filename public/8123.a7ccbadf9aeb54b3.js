"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8123],{8123:(P,c,s)=>{s.r(c),s.d(c,{HourPageModule:()=>J});var d=s(4755),l=s(5030),g=s(942),u=s(7957),h=s(5861),e=s(2223),p=s(7735);function f(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Apertura"),e.qZA(),e.TgZ(3,"ion-input",12),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.openingTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.openingTime)("value",n.openingTime)}}function T(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Cierre"),e.qZA(),e.TgZ(3,"ion-input",13),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.closingTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.closingTime)("value",n.closingTime)}}function _(i,r){1&i&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2,"Horario continuo"),e.qZA()())}function C(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Apertura turno ma\xf1ana"),e.qZA(),e.TgZ(3,"ion-input",14),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.morningOpeningTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.morningOpeningTime)("value",n.morningOpeningTime)}}function M(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Cierre turno ma\xf1ana"),e.qZA(),e.TgZ(3,"ion-input",15),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.morningClosingTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.morningClosingTime)("value",n.morningClosingTime)}}function Z(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Apertura turno tarde"),e.qZA(),e.TgZ(3,"ion-input",16),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.afternoonOpeningTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.afternoonOpeningTime)("value",n.afternoonOpeningTime)}}function H(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",7),e._uU(2,"Cierre turno tarde"),e.qZA(),e.TgZ(3,"ion-input",17),e.NdJ("ngModelChange",function(a){e.CHM(n);const t=e.oxw();return e.KtG(t.afternoonClosingTime=a)}),e.qZA()()}if(2&i){const n=e.oxw();e.xp6(3),e.Q6J("ngModel",n.afternoonClosingTime)("value",n.afternoonClosingTime)}}const x=[{path:"",component:(()=>{class i{constructor(n,o,a,t){this.cargaRuteroService=n,this.route=o,this.toastController=a,this.router=t,this.codigo="",this.openingTime="00:00",this.closingTime="00:01",this.isContinuous=!1,this.morningOpeningTime="00:00",this.morningClosingTime="00:01",this.afternoonOpeningTime="00:02",this.afternoonClosingTime="00:03",this.telefono="",this.telefono2="",this.sinTelefono=!1}ngOnInit(){this.route.paramMap.subscribe(n=>{const o=n.get("codigo");null!==o&&(this.codigo=o,console.log("C\xf3digo:",this.codigo))})}showErrorToast(n){var o=this;return(0,h.Z)(function*(){(yield o.toastController.create({message:n,duration:4e3,color:"danger",position:"top"})).present()})()}onSubmit(){if(console.log(this.telefono),console.log(this.telefono.length),this.isContinuous){if(!this.telefono||!this.telefono2||this.telefono.length<10||this.telefono2.length<10)return void this.showErrorToast("Por favor complete todos los campos y aseg\xfarese de que los campos de tel\xe9fono tengan al menos 10 d\xedgitos.");{const n={codigo:this.codigo,openingTime:this.openingTime,closingTime:this.closingTime,isContinuous:this.isContinuous,update:"si",Telefono:this.telefono,Telefono2:this.telefono2};if(!this.validateTimeRange(this.openingTime,this.closingTime))return void this.showErrorToast("La hora de cierre debe ser superior a la hora de apertura.");this.updateItemInLocalStorage(this.codigo),this.cargaRuteroService.update(n).then(()=>{this.router.navigate(["rutero"])}).catch(o=>{this.showErrorToast(o)})}}else{if(!this.telefono||!this.telefono2||this.telefono.length<10||this.telefono2.length<10)return void this.showErrorToast("Por favor complete todos los campos y aseg\xfarese de que los campos de tel\xe9fono tengan al menos 10 d\xedgitos.");{const n={codigo:this.codigo,morningOpeningTime:this.morningOpeningTime,morningClosingTime:this.morningClosingTime,afternoonOpeningTime:this.afternoonOpeningTime,afternoonClosingTime:this.afternoonClosingTime,update:"si",Telefono:this.telefono,Telefono2:this.telefono2};if(!this.validateTimeRange(this.morningOpeningTime,this.morningClosingTime)||!this.validateTimeRange(this.afternoonOpeningTime,this.afternoonClosingTime)||!this.validateTimeRange(this.morningClosingTime,this.afternoonOpeningTime))return void this.showErrorToast("Por favor ingrese un rango de horas v\xe1lido.");this.updateItemInLocalStorage(this.codigo),this.cargaRuteroService.update(n).then(o=>{console.log(o),this.router.navigate(["rutero"])}).catch(o=>{this.showErrorToast(o),console.log(o)})}}}updateItemInLocalStorage(n){const o=localStorage.getItem("ruteroCache");if(console.log(this.codigo),o){const t=JSON.parse(o).map(m=>m.Codigo===n?{...m,update:"si"}:m);localStorage.setItem("ruteroCache",JSON.stringify(t)),console.log(t)}}validateTimeRange(n,o){return new Date(`1970-01-01T${n}`)<new Date(`1970-01-01T${o}`)}toggleSinTelefono(){this.telefono2=this.sinTelefono?"0000000000":""}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(p.q),e.Y36(u.gz),e.Y36(g.yF),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-hour"]],decls:36,vars:11,consts:[["color","primary"],["slot","start"],["defaultHref","rutero-dia"],[3,"ngSubmit"],["hourForm","ngForm"],["name","isContinuous",3,"ngModel","ngModelChange"],[4,"ngIf"],["position","floating"],["type","text","name","telefono","inputmode","numeric",3,"ngModel","ngModelChange"],["type","text","name","telefono2","inputmode","numeric",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange","ionChange"],["type","submit","expand","full"],["type","time","name","openingTime",3,"ngModel","value","ngModelChange"],["type","time","name","closingTime",3,"ngModel","value","ngModelChange"],["type","time","name","morningOpeningTime",3,"ngModel","value","ngModelChange"],["type","time","name","morningClosingTime",3,"ngModel","value","ngModelChange"],["type","time","name","afternoonOpeningTime",3,"ngModel","value","ngModelChange"],["type","time","name","afternoonClosingTime",3,"ngModel","value","ngModelChange"]],template:function(n,o){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-back-button",2),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5," Ingreso de Horario del cliente "),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-card")(8,"ion-card-content")(9,"form",3,4),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(11,"ion-item")(12,"ion-label"),e._uU(13,"\xbfJornada continua?"),e.qZA(),e.TgZ(14,"ion-checkbox",5),e.NdJ("ngModelChange",function(t){return o.isContinuous=t}),e.qZA()(),e.YNc(15,f,4,2,"ion-item",6),e.YNc(16,T,4,2,"ion-item",6),e.YNc(17,_,3,0,"ion-item",6),e.YNc(18,C,4,2,"ion-item",6),e.YNc(19,M,4,2,"ion-item",6),e.YNc(20,Z,4,2,"ion-item",6),e.YNc(21,H,4,2,"ion-item",6),e.TgZ(22,"ion-item")(23,"ion-label",7),e._uU(24,"Telefono"),e.qZA(),e.TgZ(25,"ion-input",8),e.NdJ("ngModelChange",function(t){return o.telefono=t}),e.qZA()(),e.TgZ(26,"ion-item")(27,"ion-label",7),e._uU(28,"Telefono2"),e.qZA(),e.TgZ(29,"ion-input",9),e.NdJ("ngModelChange",function(t){return o.telefono2=t}),e.qZA()(),e.TgZ(30,"ion-item")(31,"ion-label"),e._uU(32,"No tiene Telefono2"),e.qZA(),e.TgZ(33,"ion-checkbox",10),e.NdJ("ngModelChange",function(t){return o.sinTelefono=t})("ionChange",function(){return o.toggleSinTelefono()}),e.qZA()(),e.TgZ(34,"ion-button",11),e._uU(35,"Guardar"),e.qZA()()()()()),2&n&&(e.xp6(14),e.Q6J("ngModel",o.isContinuous),e.xp6(1),e.Q6J("ngIf",o.isContinuous),e.xp6(1),e.Q6J("ngIf",o.isContinuous),e.xp6(1),e.Q6J("ngIf",o.isContinuous),e.xp6(1),e.Q6J("ngIf",!o.isContinuous),e.xp6(1),e.Q6J("ngIf",!o.isContinuous),e.xp6(1),e.Q6J("ngIf",!o.isContinuous),e.xp6(1),e.Q6J("ngIf",!o.isContinuous),e.xp6(4),e.Q6J("ngModel",o.telefono),e.xp6(4),e.Q6J("ngModel",o.telefono2),e.xp6(4),e.Q6J("ngModel",o.sinTelefono))},dependencies:[d.O5,l._Y,l.JJ,l.JL,l.On,l.F,g.oU,g.YG,g.Sm,g.PM,g.FN,g.nz,g.W2,g.Gu,g.pK,g.Ie,g.Q$,g.wd,g.sr,g.w,g.j9,g.cs]}),i})()}];let v=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(x),u.Bz]}),i})(),J=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,l.u5,g.Pc,v]}),i})()}}]);