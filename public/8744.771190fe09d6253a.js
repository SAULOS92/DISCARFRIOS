"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8744],{8744:(P,g,n)=>{n.r(g),n.d(g,{RuteroDiaPageModule:()=>I});var l=n(4755),d=n(5030),o=n(942),c=n(7957),m=n(5861),t=n(2223),p=n(7735);function f(i,r){1&i&&(t.TgZ(0,"label")(1,"h5",3),t._uU(2,"Sin Resultados"),t.qZA()())}function D(i,r){1&i&&t._UZ(0,"img",7)}const y=function(i){return["/hour",i]};function T(i,r){if(1&i&&(t.TgZ(0,"ion-item",8)(1,"ion-card",9)(2,"ion-card-content")(3,"strong")(4,"h5",10),t._uU(5),t.qZA(),t.TgZ(6,"h3"),t._uU(7),t.qZA(),t.TgZ(8,"h3"),t._uU(9),t.qZA()(),t.TgZ(10,"h3"),t._uU(11),t.qZA()()()()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(7,y,e.Codigo)),t.xp6(4),t.AsE("",e.Codigo," - ",e.Cliente,""),t.xp6(2),t.Oqu(e.RZ),t.xp6(2),t.AsE("",e.Direccion," - ",e.Barrio,""),t.xp6(2),t.Oqu(e.OrdenDia)}}const R=[{path:"",component:(()=>{class i{constructor(e,s,a){this.ruteroService=e,this.route=s,this.loadingController=a,this.sinresult=!1,this.lastCallTimestamp=0,this.cacheDuration=864e5}ngOnInit(){const e=this.route.snapshot.paramMap.get("dia"),s=localStorage.getItem("number"),a=localStorage.getItem("ruteroCache"),h=localStorage.getItem("ruteroCacheTimestamp");if(a&&h){const u=parseInt(h);if((new Date).getTime()-u<this.cacheDuration)return this.items=JSON.parse(a),this.filterItemsByDay(e),void this.filterItemsByUpdate()}this.presentLoading(),this.ruteroSubscription=this.ruteroService.getRutero(s).subscribe(u=>{console.log(u),this.items=u,this.filterItemsByDay(e),this.filterItemsByUpdate(),console.log(this.items),this.sinresult=0===this.items.length,localStorage.setItem("ruteroCache",JSON.stringify(u)),localStorage.setItem("ruteroCacheTimestamp",(new Date).getTime().toString()),this.dismissLoading()})}presentLoading(){var e=this;return(0,m.Z)(function*(){yield(yield e.loadingController.create({message:"Cargando...",translucent:!0,spinner:"crescent"})).present()})()}dismissLoading(){var e=this;return(0,m.Z)(function*(){yield e.loadingController.dismiss()})()}filterItemsByDay(e){this.items=this.items.filter(s=>s.Dias===e).sort((s,a)=>parseInt(s.OrdenDia)-parseInt(a.OrdenDia))}filterItemsByUpdate(){this.items=this.items.filter(e=>!e.update)}ngOnDestroy(){this.ruteroSubscription&&this.ruteroSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.q),t.Y36(c.gz),t.Y36(o.HT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rutero-dia"]],decls:11,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","rutero"],["text-center",""],[4,"ngIf"],["src","./assets/shapes.svg",4,"ngIf"],["style","width: 100%",4,"ngFor","ngForOf"],["src","./assets/shapes.svg"],[2,"width","100%"],[2,"width","100%",3,"routerLink"],[2,"font-size","smaller"]],template:function(e,s){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5," Rutero por Dia "),t.qZA()()(),t.TgZ(6,"ion-content",3),t.YNc(7,f,3,0,"label",4),t.YNc(8,D,1,0,"img",5),t.TgZ(9,"ion-list"),t.YNc(10,T,12,9,"ion-item",6),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",s.sinresult),t.xp6(1),t.Q6J("ngIf",s.sinresult),t.xp6(2),t.Q6J("ngForOf",s.items))},dependencies:[l.sg,l.O5,o.oU,o.Sm,o.PM,o.FN,o.W2,o.Gu,o.Ie,o.q_,o.wd,o.sr,o.cs,o.YI,c.rH]}),i})()}];let Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(R),c.Bz]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[l.ez,d.u5,o.Pc,Z]}),i})()}}]);