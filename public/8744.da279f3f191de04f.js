"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8744],{8744:(P,g,n)=>{n.r(g),n.d(g,{RuteroDiaPageModule:()=>Z});var c=n(4755),d=n(5030),s=n(942),u=n(7957),m=n(5861),t=n(2223),p=n(7735);function f(i,o){1&i&&(t.TgZ(0,"label")(1,"h5",3),t._uU(2,"Sin Resultados"),t.qZA()())}function D(i,o){1&i&&t._UZ(0,"img",7)}const y=function(i){return["/hour",i]};function T(i,o){if(1&i&&(t.TgZ(0,"ion-item",8)(1,"ion-card",9)(2,"ion-card-content")(3,"strong")(4,"h5",10),t._uU(5),t.qZA(),t.TgZ(6,"h3"),t._uU(7),t.qZA(),t.TgZ(8,"h3"),t._uU(9),t.qZA()(),t.TgZ(10,"h3"),t._uU(11),t.qZA()()()()),2&i){const e=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(7,y,e.Codigo)),t.xp6(4),t.AsE("",e.Codigo," - ",e.Cliente,""),t.xp6(2),t.Oqu(e.RZ),t.xp6(2),t.AsE("",e.Direccion," - ",e.Barrio,""),t.xp6(2),t.Oqu(e.OrdenDia)}}const I=[{path:"",component:(()=>{class i{constructor(e,r,a){this.ruteroService=e,this.route=r,this.loadingController=a,this.sinresult=!1,this.lastCallTimestamp=0,this.cacheDuration=864e5}ngOnInit(){const e=this.route.snapshot.paramMap.get("dia"),r=localStorage.getItem("number"),a=localStorage.getItem("ruteroCache"),h=localStorage.getItem("ruteroCacheTimestamp");if(a&&h){const l=parseInt(h);if((new Date).getTime()-l<this.cacheDuration)return this.items=JSON.parse(a),this.filterItemsByDay(e),this.filterItemsByUpdate(),void(this.sinresult=0===this.items.length)}this.presentLoading(),null!==r&&(this.ruteroSubscription=this.ruteroService.getRutero(parseInt(r)).subscribe(l=>{this.items=l,this.filterItemsByDay(e),this.filterItemsByUpdate(),this.sinresult=0===this.items.length,localStorage.setItem("ruteroCache",JSON.stringify(l)),localStorage.setItem("ruteroCacheTimestamp",(new Date).getTime().toString()),this.dismissLoading()}))}presentLoading(){var e=this;return(0,m.Z)(function*(){yield(yield e.loadingController.create({message:"Cargando...",translucent:!0,spinner:"crescent"})).present()})()}dismissLoading(){var e=this;return(0,m.Z)(function*(){yield e.loadingController.dismiss()})()}filterItemsByDay(e){this.items=this.items.filter(r=>r.Dias===e).sort((r,a)=>parseInt(r.OrdenDia)-parseInt(a.OrdenDia))}filterItemsByUpdate(){this.items=this.items.filter(e=>!e.update)}ngOnDestroy(){this.ruteroSubscription&&this.ruteroSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.q),t.Y36(u.gz),t.Y36(s.HT))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-rutero-dia"]],decls:11,vars:3,consts:[["color","primary"],["slot","start"],["defaultHref","rutero"],["text-center",""],[4,"ngIf"],["src","./assets/shapes.svg",4,"ngIf"],["style","width: 100%",4,"ngFor","ngForOf"],["src","./assets/shapes.svg"],[2,"width","100%"],[2,"width","100%",3,"routerLink"],[2,"font-size","smaller"]],template:function(e,r){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5," Rutero por Dia "),t.qZA()()(),t.TgZ(6,"ion-content",3),t.YNc(7,f,3,0,"label",4),t.YNc(8,D,1,0,"img",5),t.TgZ(9,"ion-list"),t.YNc(10,T,12,9,"ion-item",6),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("ngIf",r.sinresult),t.xp6(1),t.Q6J("ngIf",r.sinresult),t.xp6(2),t.Q6J("ngForOf",r.items))},dependencies:[c.sg,c.O5,s.oU,s.Sm,s.PM,s.FN,s.W2,s.Gu,s.Ie,s.q_,s.wd,s.sr,s.cs,s.YI,u.rH]}),i})()}];let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(I),u.Bz]}),i})(),Z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.ez,d.u5,s.Pc,R]}),i})()}}]);